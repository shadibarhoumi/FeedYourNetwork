<head>
  <title>FeedYourNetwork</title>
  <script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: a67fqk3wedsg
  authorize: true
</script>
</head>

<body>
  {{> login}}	
  {{> contacts}}
  {{> notifications}}
</body>

<template name="login">
  <div class="login" style="float: right">
    <script type="in/Login" data-onAuth="onLinkedInAuth"></script>
    {{loginButtons align="right"}}
    {{#if currentUser}}
      <button class="loadContacts">Load LinkedIn and Facebook Contacts</button>
    {{/if}}
  </div>
</template>

<template name="contacts">
  <div class="contacts" style="float: left">
  <h3>Contacts</h3>

  <div class="add-contact">
    <h4>Add Contact:</h4>
    <input class="name" type="text" placeholder="Name">
    <input class="email" type="email" placeholder="Email">
    <button class="submit">Add Contact</button>
  </div>

    <div class="search-contact">
      <h4>Search Contact:</h4>
      <input class="search" type="text" placeholder="Enter Contact Name">
    </div>

    {{>contactList}}

  </div>
</template>

<template name="contactList">
  <ul class="list">
    <h4>All Contacts:</h4>
    {{#each contacts}}
      {{> eachContact}} 
    {{/each}}   
  </ul>
</template>


<template name="eachContact">
    <li id="{{_id}}" class="contact" style="border: 2px solid #aeee00;">
      <div class="active-indicator">
        <div class="outline"></div>
        <a class="avatar" style="background-image: url({{pictureUrl}}); background-repeat: no-repeat; height: 100px; width: 100px; display: block; text-indent: -9999em;">Avatar</a>
      </div>
        <a class="name">
          <h2>{{name}}</h2>
        </a>
        <div class="info">
          <span>{{email}}</span>
          {{>linkedinStream}} 
          {{#if flagged}}
            {{#if interval}}
              <p>Contact in {{nextContactString nextContact}}</p>
            {{else}}
              <p>Contact every <input class="interval" type="text"><button class="submit-interval">Set</button></p>
            {{/if}}
          {{/if}}
        </div>
    </li>
</template>

<template name="linkedinStream">
  {{#if linkedin}}
    <button class="linkedinStream">Get linkedin updates</button>
  {{/if}}
</template>

<template name="notifications">
  <h3>Upcoming Contacts</h3>
    <li>
      {{#each upcoming}}
        <p>Upcoming: Contact {{name}} in {{nextContactString nextContact}}</p>
      {{/each}}
    </li>
  <h3>Future Contacts</h3>
    {{#each future}}
      <p>Contact {{{names}}} in {{nextContactString nextContact}}</p>
    {{/each}}
</template>
